<!doctype html>
<html lang="nb">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="google-maps-api-key" content="AIzaSyCNqJylH-TK3UEeLB8m5HylyfpVeG5iqBc">
  <title>G√•rdsbutikker ‚Äî Mat Sjekk</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:0;padding:0}
    header{padding:1rem;background:#0a6;border-bottom:1px solid #0a6}
    .container{padding:1rem}
    .top-tabs{display:flex;justify-content:center;gap:8px;flex-wrap:wrap;margin-top:10px}
    .top-tabs a{color:#fff;text-decoration:none;border:1px solid rgba(255,255,255,0.35);border-radius:999px;padding:6px 12px;font-weight:600}
    .top-tabs a:hover{background:rgba(255,255,255,0.15)}
    #map{height:400px;border:1px solid #ccc}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
    .nav-links{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .link-btn{display:inline-block;padding:8px 12px;border:1px solid #ccc;border-radius:8px;background:#fff;color:#111;text-decoration:none}
    .link-btn:hover{background:#f5f5f5}
    .controls a{overflow-wrap:anywhere;word-break:break-word}
    .controls input,.controls select,.controls button{max-width:100%}
    .map-controls{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin:8px 0}
    .map-btn{padding:6px 10px;border:1px solid #ccc;background:#fff;cursor:pointer;border-radius:6px}
    .map-btn:hover{background:#f5f5f5}
    .map-size-label{font-size:0.9rem;color:#555}
    .map-status{margin:8px 0 0;font-size:.85rem;color:#4b5563}
    .result-header{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap}
    .result-map-btn{padding:6px 10px;border:1px solid #d7dee7;border-radius:8px;background:#fff;color:#123;text-decoration:none;font-size:.84rem}
    .result-map-btn:hover{background:#f4f8fb}
    .content-grid{display:flex;gap:12px;align-items:flex-start}
    .side-rail{flex:0 0 280px;display:flex;flex-direction:column;gap:10px}
    .ad-slot{min-height:160px;border:1px dashed #c8d3df;border-radius:10px;background:#f8fbff;padding:12px;color:#4c5b6a;font-size:.9rem}
    .ad-slot strong{display:block;margin-bottom:6px;color:#213}
    .list{max-height:420px;overflow:auto;border:1px solid #e6e9ee;border-radius:12px;padding:10px;background:#fafbfc}
    .item{padding:10px 12px;border:1px solid #e6e9ee;border-radius:10px;background:#fff;margin-bottom:8px}
    .item:last-child{margin-bottom:0}
    .item-title{font-weight:700;font-size:1rem;color:#111;margin-bottom:4px}
    .item-meta{font-size:.88rem;color:#3b4754;margin-bottom:6px;line-height:1.35}
    .item-sub{font-size:.85rem;color:#56606b;line-height:1.35;margin-top:2px}
    .item-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .item-row{display:flex;gap:10px;align-items:flex-start}
    .item-content{min-width:0;flex:1}
    .item-thumb{width:92px;height:68px;object-fit:cover;border-radius:8px;border:1px solid #dbe3ea;background:#fff;flex-shrink:0}
    .item-link{display:inline-block;padding:6px 10px;border:1px solid #d7dee7;border-radius:999px;text-decoration:none;color:#134; background:#f7fafc;font-size:.82rem}
    .item-link:hover{background:#eef4f8}
    @media (max-width: 768px){
      #map{height:110px}
      .map-controls{justify-content:flex-start}
      .nav-links{width:100%}
      .nav-links .link-btn,
      .nav-links #backBtn{width:100%;text-align:center}
      .list{max-height:240px}
      .content-grid{flex-direction:column}
      .side-rail{width:100%;flex-basis:auto}
      .top-tabs{flex-direction:column;align-items:stretch}
      .top-tabs a{width:100%;text-align:center}
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>G√•rdsbutikker</h1>
      <p>Finn lokale produsenter og g√•rdsbutikker. Sorter etter land ‚Üí fylke/region ‚Üí kommune, s√∏k etter produkter og planlegg reiser.</p>
      <nav class="top-tabs" aria-label="Hovednavigasjon">
        <a href="index.html">Hjem</a>
        <a href="gardsbutikker.html">G√•rdsbutikker</a>
        <a href="index.html#news">Nyheter og media</a>
        <a href="index.html#contact">Kontakt oss</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="controls nav-links">
      <button id="backBtn">‚Üê Tilbake</button>
      <a id="homeLink" class="link-btn" href="https://matsjekk.com">üè† Hjem</a>
      <a id="newsLink" class="link-btn" href="https://matsjekk.com#news">üì∞ Nyheter og media</a>
    </div>
    <div class="controls">
      <select id="countrySelect"><option value="">Velg land</option></select>
      <select id="regionSelect"><option value="">Velg fylke/region</option></select>
      <select id="municipalitySelect"><option value="">Velg kommune</option></select>
      <button id="applyFiltersBtn" type="button">Oppdater s√∏k</button>
      <select id="sortSelect"><option value="distance_asc">Sorter: N√¶rmest deg</option><option value="name_asc">Sorter: Navn A-√Ö</option><option value="name_desc">Sorter: Navn √Ö-A</option></select>
      <input id="searchInput" placeholder="S√∏k butikk" style="flex:1" />
      <button id="myMunicipalityBtn" type="button">S√∏k i feltet</button>
      <button id="nearMeBtn" type="button">Finn n√¶r min posisjon</button>
      <input id="routeFrom" placeholder="Fra (adresse eller by)" />
      <input id="routeTo" placeholder="Til (adresse eller by)" />
      <button id="routeBtn">Finn langs rute</button>
      <button id="resetBtn">Tilbakestill</button>
    </div>

    <div class="map-controls" aria-label="Kartst√∏rrelse">
      <span class="map-size-label">Kart-h√∏yde</span>
      <button id="mapHeightDown" class="map-btn" type="button" aria-label="Reduser kart-h√∏yde">-</button>
      <button id="mapHeightUp" class="map-btn" type="button" aria-label="√òk kart-h√∏yde">+</button>
    </div>

    <div id="map"></div>
    <div id="mapStatus" class="map-status" aria-live="polite"></div>

    <div class="result-header">
      <h2 id="resultsHeading">G√•rdsbutikker n√¶r deg</h2>
      <a id="openGoogleMapBtn" class="result-map-btn" href="#" target="_blank" rel="noopener">√Öpne i Google Maps</a>
    </div>
    <div class="content-grid">
      <div class="list" id="list"></div>
      <div class="side-rail">
        <div class="ad-slot" id="adSlot">
          <strong>Annonse</strong>
          Plass for relevant lokal annonse eller partnerinnhold.
        </div>
      </div>
    </div>
  </main>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <script src="js/gardsbutikker.js"></script>
</body>
</html>
